<div id="page">
  <mat-toolbar color="primary">
    <button mat-icon-button (click)="sidenav.toggle()">
      <mat-icon>menu</mat-icon>
    </button>
    <span>{{ title }}</span>
    <span class="spacer"></span>
    <span *ngIf="user$ | async as user">{{ user.name }}</span>
  </mat-toolbar>

  <mat-sidenav-container id="sidenav-container">
    <mat-sidenav mode="side" #sidenav id="sidenav">
      <form class="settings-form" [formGroup]="settingsFormGroup">
        <span id="settings">
          <h2>Settings</h2>
          <button mat-icon-button (click)="sidenav.close()">
            <mat-icon>close</mat-icon>
          </button>
        </span>
        <mat-form-field appearance="outline">
          <mat-label>GitHub Token</mat-label>
          <input matInput type="password" [formControl]="tokenControl">
          <mat-icon matSuffix>key</mat-icon>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Maximum Workflow Run Age</mat-label>
          <input matInput type="number" [formControlName]="maxWorkflowRunAgeControlKey">
          <span matSuffix>&nbsp;days</span>
        </mat-form-field>
        <mat-label>Polling Interval</mat-label>
        <mat-slider min="10" max="60" step="1" thumbLabel="true"
                    [formControlName]="pollingIntervalControlKey">
        </mat-slider>
      </form>
      <form class="settings-form" [formGroup]="configurationFormGroup">
        <h2>Filter</h2>
        <span>
        <mat-form-field appearance="outline">
          <mat-label>Teams</mat-label>
          <mat-select multiple [formControlName]="teamsSelectionControlKey" [compareWith]="compareTeams">
            <mat-option *ngFor="let option of teams$ | async" [value]="option">
              {{ option.slug }} ({{ option.organization.login }})
            </mat-option>
          </mat-select>
        </mat-form-field>
      </span>
        <mat-form-field appearance="outline">
          <mat-label>Status</mat-label>
          <mat-select multiple [formControlName]="statusSelectionControlKey">
            <mat-option *ngFor="let option of workflowRunStatus" [value]="option">{{ option }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Conclusion</mat-label>
          <mat-select multiple [formControlName]="conclusionSelectionControlKey">
            <mat-option *ngFor="let option of workflowRunConclusions" [value]="option">{{ option }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Workflow Names</mat-label>
          <mat-chip-list #chipList aria-label="Workflow Name Selection"
                         [formControlName]="workflowNameSelectionControlKey">
            <mat-chip *ngFor="let name of workflowNamesFilter$ | async" (removed)="remove(name)">
              {{ name }}
              <button matChipRemove>
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>
            <input placeholder="Add Workflow Name..."
                   [matChipInputFor]="chipList"
                   [matChipInputSeparatorKeyCodes]="chipSeparatorKeysCodes"
                   [matChipInputAddOnBlur]="true"
                   (matChipInputTokenEnd)="add($event)">
          </mat-chip-list>
        </mat-form-field>
      </form>
    </mat-sidenav>
    <mat-sidenav-content>
      <actio-workflow-run-table></actio-workflow-run-table>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
